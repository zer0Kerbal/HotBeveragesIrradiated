// serv-250.cfg v1.0.0.0
// Service Modules (SERV)
// created: 22 Jul 2014
// updated: 31 Dec 2022

// this file: CC BY-ND 4.0 by Ph34b0t and zer0Kerbal

PART
{
	// Hot Beverage Inc. - Kerpollo Service Module
	// At your service! Sometimes at least...
	// 

	name = serv-250
	// HB_ServiceModule_25
	module = Part
	author = ph34rb0t and zer0Kerbal

	// service module
	MODEL
	{
		model = HotBeverage/ServiceModules/Assets/KSM
		scale = 0.8,0.8,0.8
	}

	// service module engine
	MODEL
	{
		model = HotBeverage/ServiceModules/Assets/KSP
		scale = 0.8, 0.8, 0.8
		position = 0.0, -2, 0.0
	}
	scale = 1.0
	rescaleFactor = 1.0
	bulkheadProfiles = size2

	attachRules = 1,0,1,1,0
	node_stack_top = 0.0, 1.96, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -2.0, 0.0, 0.0, -1.0, 0.0, 2

	TechRequired = specializedControl
	entryCost = 10000
	cost = 8000
	category = Propulsion
	subcategory = 0

	manufacturer = #HBI-Agency-titl
	title = #SERV-250-titl // 2.5m
	description = #SERV-250-desc
	tags = #autoLOC_8310144 // cargo contain hollow payload protect (stor therm store heat hold convey equipment freight service CSM
	
	mass = 0.960
	fuelCrossFeed = true

	dragModelType = default
	maximum_drag = 0.3
	minimum_drag = 0.3
	angularDrag = 2

	crashTolerance = 100
	//Fails at 30 tons at 5g ((30*5*9.81) /50)
	breakingForce = 30
	breakingTorque = 60

	maxTemp = 2500
	skinMaxTemp = 2800
	thermalMassModifier = 1.0
	heatConductivity = 0.06
	emissiveConstant = 0.85 // engine nozzles are good at radiating, NTRs even better
	skinInternalConductionMult = 4.0
	radiatorMax = 0.35 //Default = 0.25 but nuke engines are meant to run hot

	stageOffset = 1
	childStageOffset = 1

	MODULE
	{
		name = ModuleGenerator
		isAlwaysActive = False
		activateGUIName = Fuel Cell On
		shutdownGUIName = Fuel Cell Off
		INPUT_RESOURCE
		{
			ResourceName = LiquidFuel
			Ratio = 0.0016875
			FlowMode = STAGE_PRIORITY_FLOW
		}
		INPUT_RESOURCE
		{
			ResourceName = Oxidizer
			Ratio = 0.0020625
			FlowMode = STAGE_PRIORITY_FLOW
		}
		
		// INPUT_RESOURCE
		// {
		// 	 name = FuelCellFuel
		// 	 rate = 0.03
		// }	
		OUTPUT_RESOURCE
		{
			name = ElectricCharge
			rate = 1.5
		}
		// OUTPUT_RESOURCE
		// {
		// 	name = FuelCellWaste
		// 	rate = 0.03
		// }
	}

	MODULE
	{
		name = ModuleAnimateGeneric
		animationName = Antenna
		animSwitch = true
		isOneShot = false
		startEventGUIName = Deploy Antennas
		endEventGUIName = Stow Antennas
	}
		stagingIcon = LIQUID_ENGINE

		EFFECTS
		{
			running_closed
			{
				AUDIO
				{
					channel = Ship
					clip = sound_rocket_hard
					volume = 0.0 0.0
					volume = 1.0 1.0
					pitch = 0.0 0.2
					pitch = 1.0 1.0
					loop = true
				}
				PREFAB_PARTICLE
				{
					prefabName = fx_smokeTrail_veryLarge
					transformName = thrustTransform
					emission = 0.05 0.0
					emission = 0.075 0.25
					emission = 1.0 1.25
					speed = 0.0 0.25
					speed = 1.0 1.0
					localOffset = 0, 0, 4
				}
				MODEL_MULTI_PARTICLE
				{
					modelName = Squad/FX/ks25_Exhaust
					transformName = thrustTransform
					emission = 0.0 0.0
					emission = 0.05 0.0
					emission = 0.075 0.25
					emission = 1.0 1.25
					speed = 0.0 0.5
					speed = 1.0 1.2
					localOffset = 0, 0, 4
					localscale = 1, 1, 1
				}
			
			}
			engage
			{
				AUDIO
				{
					channel = Ship
					clip = sound_vent_soft
					volume = 1.0
					pitch = 2.0
					loop = false
				}
			}
			flameout
			{
				PREFAB_PARTICLE
				{
					prefabName = fx_exhaustSparks_flameout_2
					transformName = thrustTransform
					oneShot = true
				}
				AUDIO
				{
					channel = Ship
					clip = sound_explosion_low
					volume = 1.0
					pitch = 2.0
					loop = false
				}
			}
		}

		MODULE
		{
			name = ModuleEnginesFX
			thrustVectorTransformName = thrustTransform
			runningEffectName = running_closed
			exhaustDamage = True
			ignitionThreshold = 0.1
			minThrust = 0
			maxThrust = 23
			heatProduction = 100
			fxOffset = 0, 0, 0.8
			PROPELLANT
			{
				name = LiquidFuel
				ratio = 0.9
				DrawGauge = True
			}
			PROPELLANT
			{
				name = Oxidizer
				ratio = 1.1
			}
			// PROPELLANT
			// {
			// 	name = Aerozine
			// 	ratio = 1.0
			// 	DrawGauge = True
			// }
			// PROPELLANT
			// {
			// 	name = DinitrogenTetroxide
			// 	ratio = 1.6
			// 	DrawGauge = True
			// }
			atmosphereCurve
			{
				key = 0 312
				key = 1 271
				// key = 7 0.001
			}
		}

		MODULE
		{
			name = ModuleGimbal
			gimbalTransformName = thrustTransform
			gimbalRange = 1.0
		}

		MODULE
		{
			name = ModuleAlternator	
			RESOURCE
			{
				name = ElectricCharge
				rate = 1.0
			}
		}
		RESOURCE
		{
			name = ElectricCharge
			amount = 0
			maxAmount = 0
		}

		MODULE
		{
			name = ModuleSAS
		}

		MODULE
		{
			name = ModuleReactionWheel
			
			PitchTorque = 300
			YawTorque = 300
			RollTorque = 300
			
			RESOURCE
			{
				name = ElectricCharge
				rate = 0.6
			}
		}


	MODULE
	{
		name = ModuleDataTransmitter
		// HG-5 HighGainAntenna5
		antennaType = RELAY
		packetInterval = 0.35
		packetSize = 2
		packetResourceCost = 18.0
		requiredResource = ElectricCharge
		DeployFxModules = 0
		antennaPower = 50000
		antennaCombinable = True
	}

	RESOURCE
	{
		name = ElectricCharge
		amount = 300
		maxAmount = 300
	}

	RESOURCE
	{
		name = MonoPropellant
		amount = 250
		maxAmount = 250
	}

	RESOURCE
	{
		name = LiquidFuel
		amount = 180
		maxAmount = 180
	}
	RESOURCE
	{
		name = Oxidizer
		amount = 210
		maxAmount = 210
	}
}